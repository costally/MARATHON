<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë°°í•˜ëŠ˜ í”„ë¡œì íŠ¸: 15ì£¼ ì•„í‚¤í…íŠ¸ ì¸í¬ê·¸ë˜í”½ (New)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Application Structure Plan: 
         Updated to 15 Weeks based on the user's uploaded image.
         Structure Logic:
         - Mobile Optimization: Weekly Plan moved to top.
         - Auto Date Logic: Automatically selects current week and maps dates to days.
         - Today Highlight Logic: Highlight "Today" card.
         - Fixed Detail View (UPDATED): Detail panel is always visible. Defaults to Today's workout.
         
         Data Source: User uploaded image (2025-11-17 start).
    -->

    <style>
        body {
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: #f8fafc; /* Slate 50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            height: 350px;
            max-height: 400px;
        }
        .card-shadow {
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }
        /* Smooth fade in for detail panel */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in {
            animation: fadeIn 0.3s ease-out forwards;
        }
        .selected-card {
            border-color: #4f46e5 !important; /* Indigo 600 */
            background-color: #eef2ff !important; /* Indigo 50 */
            transform: scale(1.02);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
    </style>
</head>
<body class="text-slate-800">

    <!-- Navbar / Header -->
    <nav class="bg-indigo-600 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 py-4 sm:px-6 lg:px-8 flex justify-between items-center">
            <div>
                <h1 class="text-xl md:text-2xl font-bold tracking-tight">PROJECT: 15 WEEKS</h1>
                <p class="text-indigo-200 text-xs uppercase tracking-widest">ë°°í•˜ëŠ˜ ì „ìš© 15ì£¼ íŒŒì´ë„ í”Œëœ</p>
            </div>
            <div class="hidden md:flex space-x-4">
                <div class="text-center">
                    <span class="block text-xs text-indigo-300">START DATE</span>
                    <span class="font-bold text-lg">2025.11.17</span>
                </div>
                <div class="border-l border-indigo-500 mx-2"></div>
                <div class="text-center">
                    <span class="block text-xs text-indigo-300">TOTAL WEEKS</span>
                    <span class="font-bold text-lg">15 Weeks</span>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Container -->
    <main class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 space-y-8">

        <!-- WEEKLY PLANNER -->
        <section>
            <div class="flex flex-col md:flex-row justify-between items-end mb-4 border-b pb-4 gap-4">
                <div>
                    <h2 class="text-2xl font-bold text-slate-900 flex items-center">
                        ğŸ“… ì£¼ê°„ ì‹¤í–‰ ê³„íš
                        <span class="ml-2 text-xs bg-indigo-100 text-indigo-700 px-2 py-1 rounded-full">Weekly Blueprint</span>
                    </h2>
                    <p class="text-slate-600 mt-1 text-sm">
                        ìš”ì¼ ì¹´ë“œë¥¼ <strong>í´ë¦­</strong>í•˜ë©´ í•˜ë‹¨ í›ˆë ¨ ê°€ì´ë“œê°€ ê°±ì‹ ë©ë‹ˆë‹¤. (ê¸°ë³¸ê°’: ì˜¤ëŠ˜)
                    </p>
                </div>
                <div class="w-full md:w-64">
                    <label for="weekSelector" class="block text-sm font-medium text-slate-700 mb-1">ì£¼ì°¨ ì„ íƒ (Select Week)</label>
                    <select id="weekSelector" class="block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm rounded-md shadow-sm bg-white border">
                        <!-- Options via JS -->
                    </select>
                </div>
            </div>

            <div id="phaseBanner" class="bg-indigo-100 text-indigo-800 px-4 py-3 rounded-lg mb-6 font-bold text-center border border-indigo-200 shadow-sm">
                <!-- Content via JS -->
            </div>

            <!-- Daily Grid -->
            <div id="dailyGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <!-- Cards via JS -->
            </div>

            <!-- DETAIL PANEL (Always Visible) -->
            <div id="workoutDetailPanel" class="bg-white border border-slate-200 rounded-xl p-6 shadow-md animate-fade-in relative overflow-hidden">
                <div class="absolute top-0 left-0 w-2 h-full bg-indigo-500" id="detailAccent"></div>
                <div class="ml-4">
                    <h3 class="text-xl font-bold text-slate-900 mb-1 flex items-center gap-2">
                        <span id="detailIcon" class="text-2xl">ğŸƒ</span>
                        <span id="detailTitle">í›ˆë ¨ ì œëª©</span>
                    </h3>
                    <p class="text-sm text-slate-500 mb-4 font-mono bg-slate-100 inline-block px-2 py-1 rounded" id="detailSpecs">ê±°ë¦¬ / í˜ì´ìŠ¤</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <!-- WHY -->
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h4 class="font-bold text-indigo-700 mb-2 text-sm uppercase tracking-wide">ğŸ¯ ì™œ í•´ì•¼ í•˜ëŠ”ê°€? (WHY)</h4>
                            <p id="detailWhy" class="text-sm text-slate-700 leading-relaxed">...</p>
                        </div>
                        
                        <!-- HOW -->
                        <div class="bg-slate-50 p-4 rounded-lg">
                            <h4 class="font-bold text-indigo-700 mb-2 text-sm uppercase tracking-wide">âš™ï¸ ì–´ë–»ê²Œ í•˜ëŠ”ê°€? (HOW)</h4>
                            <p id="detailHow" class="text-sm text-slate-700 leading-relaxed">...</p>
                        </div>

                        <!-- CAUTION -->
                        <div class="bg-rose-50 p-4 rounded-lg border border-rose-100">
                            <h4 class="font-bold text-rose-700 mb-2 text-sm uppercase tracking-wide">âš ï¸ ì£¼ì˜ì‚¬í•­ (CAUTION)</h4>
                            <p id="detailCaution" class="text-sm text-slate-700 leading-relaxed">...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- INTRO -->
        <section>
            <div class="bg-white rounded-xl card-shadow p-6 border-l-8 border-indigo-500">
                <h2 class="text-lg font-bold text-slate-900 mb-2">í›ˆë ¨ êµ¬ì¡° ë³€ê²½ ì•Œë¦¼ (Structure Update)</h2>
                <p class="text-slate-600 leading-relaxed text-sm md:text-base">
                    ì œê³µëœ <strong>15ì£¼ ë°ì´í„° í…Œì´ë¸”</strong>ì„ ê¸°ë°˜ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì´ ì¬ì„¤ê³„ë˜ì—ˆìŠµë‹ˆë‹¤.<br>
                    ì‚¬ìš©ì ìš”ì²­ì— ë”°ë¼ <strong>ìˆ˜ìš”ì¼ í¬ë£¨ëŸ°, ê¸ˆìš”ì¼ ì—…í, ì¼ìš”ì¼ LSD</strong>ê°€ ê³ ì • ë°°ì¹˜ë˜ì—ˆìŠµë‹ˆë‹¤.
                </p>
            </div>
        </section>

        <!-- SAFETY PROTOCOL -->
        <section>
            <div class="bg-white rounded-xl card-shadow p-6">
                <div class="flex items-center justify-between mb-4">
                    <h2 class="text-lg font-bold text-slate-900">ğŸ›¡ï¸ Gemini í†µì¦ ì‹ í˜¸ë“± (Safety Protocol)</h2>
                    <span class="text-xs text-slate-500">ë§¤ì¼ ì²´í¬ í•„ìˆ˜</span>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="bg-rose-50 p-4 rounded-lg border-l-4 border-rose-500">
                        <span class="block font-bold text-rose-700 mb-1">ğŸ”´ RED (ì¦‰ì‹œ ì¤‘ë‹¨)</span>
                        <span class="text-xs text-slate-600">ì•„ì¹¨ ì²«ë°œ ì°Œë¦¿í•¨, êµ­ì†Œì  í†µì¦. 48ì‹œê°„ íœ´ì‹.</span>
                    </div>
                    <div class="bg-amber-50 p-4 rounded-lg border-l-4 border-amber-500">
                        <span class="block font-bold text-amber-700 mb-1">ğŸŸ¡ YELLOW (ê°•ë„ ì¡°ì ˆ)</span>
                        <span class="text-xs text-slate-600">ë’¤ê¿ˆì¹˜ ë»£ë»£í•¨, ì§€ì†ì  í”¼ë¡œ. LSD ê±°ë¦¬ ë‹¨ì¶•.</span>
                    </div>
                    <div class="bg-emerald-50 p-4 rounded-lg border-l-4 border-emerald-500">
                        <span class="block font-bold text-emerald-700 mb-1">ğŸŸ¢ GREEN (ì •ìƒ ì§„í–‰)</span>
                        <span class="text-xs text-slate-600">í†µì¦ ì—†ìŒ, ê°œìš´í•¨. ê³„íšëŒ€ë¡œ ì§„í–‰.</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- MACRO ANALYSIS: CHARTS -->
        <section class="grid grid-cols-1 lg:grid-cols-3 gap-8">
            <div class="lg:col-span-2 bg-white rounded-xl card-shadow p-6">
                <div class="mb-4 border-b pb-2">
                    <h3 class="text-lg font-bold text-indigo-900">ğŸ“Š 15ì£¼ í›ˆë ¨ ë¶€í•˜ (LSD ê±°ë¦¬ vs ì—…í ì„¸íŠ¸)</h3>
                    <p class="text-sm text-slate-500">ì œê³µëœ í‘œì˜ LSD ê±°ë¦¬ì™€ ì—…í ì„¸íŠ¸ ìˆ˜ ë³€í™” ê·¸ë˜í”„ì…ë‹ˆë‹¤.</p>
                </div>
                <div class="chart-container">
                    <canvas id="comboChart"></canvas>
                </div>
            </div>
            <div class="bg-white rounded-xl card-shadow p-6">
                <div class="mb-4 border-b pb-2">
                    <h3 class="text-lg font-bold text-indigo-900">ğŸ—“ï¸ í›ˆë ¨ êµ¬ì„± (Fixed Schedule)</h3>
                    <p class="text-sm text-slate-500">ì‚¬ìš©ì ë§ì¶¤í˜• ê³ ì • ìŠ¤ì¼€ì¤„</p>
                </div>
                <ul class="space-y-4 text-sm">
                    <li class="flex items-center p-3 bg-slate-50 rounded-lg">
                        <span class="bg-slate-200 text-slate-600 font-bold px-2 py-1 rounded mr-3">MON</span>
                        <div>
                            <strong class="block text-slate-800">ë¦¬ì»¤ë²„ë¦¬ ëŸ° (Recovery)</strong>
                            <span class="text-xs text-slate-500">ì¼ìš”ì¼ LSD í”¼ë¡œ íšŒë³µ (ê³ ì • 5km)</span>
                        </div>
                    </li>
                    <li class="flex items-center p-3 bg-cyan-50 rounded-lg">
                        <span class="bg-cyan-200 text-cyan-800 font-bold px-2 py-1 rounded mr-3">WED</span>
                        <div>
                            <strong class="block text-cyan-900">í¬ë£¨ëŸ° (Crew Run)</strong>
                            <span class="text-xs text-cyan-700">ì¦ê±°ìš´ ëŸ¬ë‹ & ì†Œì…œ í˜ì´ìŠ¤</span>
                        </div>
                    </li>
                    <li class="flex items-center p-3 bg-indigo-50 rounded-lg">
                        <span class="bg-indigo-200 text-indigo-800 font-bold px-2 py-1 rounded mr-3">FRI</span>
                        <div>
                            <strong class="block text-indigo-900">ì—…í ì¸í„°ë²Œ (Uphill)</strong>
                            <span class="text-xs text-indigo-700">ì‹¬í ì§€êµ¬ë ¥ ê°•í™” (í‘œ ê¸°ë°˜)</span>
                        </div>
                    </li>
                    <li class="flex items-center p-3 bg-rose-50 rounded-lg">
                        <span class="bg-rose-200 text-rose-800 font-bold px-2 py-1 rounded mr-3">SUN</span>
                        <div>
                            <strong class="block text-rose-900">LSD (Long Slow Distance)</strong>
                            <span class="text-xs text-rose-700">ì§€êµ¬ë ¥ í•µì‹¬ (ê±°ë¦¬ ì ì§„ ì¦ê°€)</span>
                        </div>
                    </li>
                </ul>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-400 py-8 mt-12">
        <div class="max-w-7xl mx-auto px-4 text-center">
            <p class="font-mono text-sm">DESIGNED BY GPT & GEMINI FOR BAE HANEUL</p>
            <p class="text-xs mt-2 opacity-60">Based on Uploaded 15-Week Table</p>
        </div>
    </footer>

    <!-- JAVASCRIPT LOGIC -->
    <script>
        // --- WORKOUT DETAILS LIBRARY (Static Data for Modal/Panel) ---
        const workoutLibrary = {
            "ë¦¬ì»¤ë²„ë¦¬": {
                why: "ì¼ìš”ì¼ LSD í›ˆë ¨ìœ¼ë¡œ ìŒ“ì¸ í”¼ë¡œë¬¼ì§ˆ(ì –ì‚°)ì„ ë°°ì¶œí•˜ê³  ê·¼ìœ¡ì˜ ê²½ì§ì„ í’€ê¸° ìœ„í•¨ì…ë‹ˆë‹¤. 'ì ê·¹ì  íœ´ì‹(Active Recovery)'ì´ ì™„ì „ íœ´ì‹ë³´ë‹¤ íšŒë³µ ì†ë„ë¥¼ 20~30% ë†’ì—¬ì¤ë‹ˆë‹¤.",
                how: "ëŒ€í™”ê°€ ì•„ì£¼ í¸ì•ˆí•˜ê²Œ ê°€ëŠ¥í•œ ì†ë„ë¡œ ëœë‹ˆë‹¤. í¼ì´ ë¬´ë„ˆì§€ì§€ ì•ŠëŠ” ì„ ì—ì„œ ê°€ì¥ ëŠë¦¬ê²Œ ë›°ì„¸ìš”. ì‹¬ë°•ìˆ˜ëŠ” Zone 1-2ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.",
                caution: "ì ˆëŒ€ ì†ë„ë¥¼ ë†’ì´ì§€ ë§ˆì„¸ìš”. 'ìš´ë™ì´ ì•ˆ ë˜ëŠ” ê²ƒ ê°™ì€ë°?'ë¼ëŠ” ëŠë‚Œì´ ë“¤ì–´ì•¼ ì •ìƒì…ë‹ˆë‹¤. ê¸°ë¶„ì´ ì¢‹ë‹¤ê³  ì§ˆì£¼í•˜ë©´ ë¶€ìƒìœ¼ë¡œ ì´ì–´ì§‘ë‹ˆë‹¤."
            },
            "íœ´ì‹/ë³´ê°•": {
                why: "ê·¼ìœ¡ê³¼ ì‹ ê²½ê³„ê°€ ì„±ì¥í•˜ëŠ” ì‹œê°„ì€ ìš´ë™í•  ë•Œê°€ ì•„ë‹ˆë¼ ì‰´ ë•Œì…ë‹ˆë‹¤. ë³´ê°• ìš´ë™ì€ ëŸ¬ë‹ìœ¼ë¡œ ì•½í•´ì§ˆ ìˆ˜ ìˆëŠ” ì½”ì–´ì™€ ë‘”ê·¼ì„ ê°•í™”í•´ ë¶€ìƒì„ ë°©ì§€í•©ë‹ˆë‹¤.",
                how: "ì™„ì „ íœ´ì‹ì„ ì·¨í•˜ê±°ë‚˜, í”Œë­í¬/ë¸Œë¦¿ì§€ ê°™ì€ ì •ì ì¸ ì½”ì–´ ìš´ë™ì„ 20ë¶„ ì •ë„ ìˆ˜í–‰í•©ë‹ˆë‹¤. ì¢…ì•„ë¦¬ í¼ë¡¤ëŸ¬ ë§ˆì‚¬ì§€ë¥¼ ê°•ë ¥ ì¶”ì²œí•©ë‹ˆë‹¤.",
                caution: "í•˜ì²´ ê·¼ë ¥ ìš´ë™(ìŠ¤ì¿¼íŠ¸, ëŸ°ì§€)ì„ ê³¼í•˜ê²Œ í•˜ë©´ ë‹¤ìŒ ë‚  í›ˆë ¨ì— ì§€ì¥ì„ ì¤ë‹ˆë‹¤. ì½”ì–´ ìœ„ì£¼ë¡œ ì§„í–‰í•˜ì„¸ìš”."
            },
            "í¬ë£¨ëŸ°": {
                why: "ëŸ¬ë‹ì˜ ì¦ê±°ì›€ì„ ìœ ì§€í•˜ê³  'ì‚¬íšŒì  ì†Œì†ê°'ì„ ëŠë¼ëŠ” ì‹œê°„ì…ë‹ˆë‹¤. í˜¼ìë§Œì˜ í›ˆë ¨ ê°•ë°•ì—ì„œ ë²—ì–´ë‚˜ ë¦¬í”„ë ˆì‹œí•˜ëŠ” ê²ƒì´ ëª©í‘œì…ë‹ˆë‹¤.",
                how: "í¬ë£¨ë“¤ê³¼ ì¦ê²ê²Œ ëŒ€í™”í•˜ë©° ëœë‹ˆë‹¤. ë³¸ì¸ì˜ í›ˆë ¨ í˜ì´ìŠ¤ë³´ë‹¤ ì•½ê°„ ëŠë¦¬ê±°ë‚˜ í¸ì•ˆí•œ ê·¸ë£¹ì— í•©ë¥˜í•˜ì„¸ìš”.",
                caution: "ë¶„ìœ„ê¸°ì— íœ©ì“¸ë ¤ 'ì˜¤ë²„í˜ì´ìŠ¤' í•˜ì§€ ì•ŠëŠ” ê²ƒì´ í•µì‹¬ì…ë‹ˆë‹¤. ê¸°ë¶„íŒŒê°€ ë˜ì–´ ì§ˆì£¼í•˜ë©´ ëª©ìš”ì¼ í…œí¬ëŸ°ì„ ë§ì¹©ë‹ˆë‹¤."
            },
            "í…œí¬ëŸ°": {
                why: "ì –ì‚° ì—­ì¹˜(LT)ë¥¼ ë†’ì—¬, ìˆ¨ì´ ì°¬ ìƒíƒœì—ì„œë„ ì†ë„ë¥¼ ìœ ì§€í•˜ëŠ” ëŠ¥ë ¥ì„ ê¸°ë¦…ë‹ˆë‹¤. 1:50 ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•´ ê°€ì¥ ì¤‘ìš”í•œ 'ìŠ¤í”¼ë“œ ì§€êµ¬ë ¥' í›ˆë ¨ì…ë‹ˆë‹¤.",
                how: "ì´ˆë°˜ 1kmëŠ” ì›œì—…ìœ¼ë¡œ ì²œì²œíˆ, ì´í›„ ëª©í‘œ í˜ì´ìŠ¤ê¹Œì§€ ë¶€ë“œëŸ½ê²Œ ì˜¬ë¦½ë‹ˆë‹¤. ì„¤ì •ëœ í˜ì´ìŠ¤(ì˜ˆ: 5:30)ë¥¼ ì¹¼ê°™ì´ ìœ ì§€í•˜ëŠ” 'ë©”íŠ¸ë¡œë†ˆ'ì´ ë˜ì„¸ìš”.",
                caution: "ì´ˆë°˜ì— ë„ˆë¬´ ë¹¨ë¦¬ ë‹¬ë¦¬ì§€ ë§ˆì„¸ìš”. í›„ë°˜ì— í¼ì§€ë©´ í›ˆë ¨ íš¨ê³¼ê°€ ë°˜ê°ë©ë‹ˆë‹¤. ì¼ì •í•œ ë¦¬ë“¬ê°ì„ ìœ ì§€í•˜ëŠ” ë° ì§‘ì¤‘í•˜ì„¸ìš”."
            },
            "ì—…í": {
                why: "ì‹¬íì§€êµ¬ë ¥(VO2max)ê³¼ í•˜ì²´ ê·¼ë ¥ì„ ë™ì‹œì— ê°•í™”í•©ë‹ˆë‹¤. í‰ì§€ ì¸í„°ë²Œë³´ë‹¤ ê´€ì ˆ ì¶©ê²©ì€ ì ìœ¼ë©´ì„œ ì‹¬ì¥ ë¶€í•˜ëŠ¥ë ¥ì€ ê·¹ëŒ€í™”í•  ìˆ˜ ìˆëŠ” ìµœê³ ì˜ íš¨ìœ¨ í›ˆë ¨ì…ë‹ˆë‹¤.",
                how: "ì˜¤ë¥´ë§‰ì—ì„œëŠ” 'ë³´í­ì„ ì¢ê²Œ, ì—‰ë©ì´ë¡œ ë¯¸ëŠ” ëŠë‚Œ'ìœ¼ë¡œ ë¹ ë¥´ê²Œ ì˜¬ë¼ê°‘ë‹ˆë‹¤. ë‚´ë¦¬ë§‰ì€ **ë°˜ë“œì‹œ** ê±¸ì–´ì„œ ë‚´ë ¤ì˜¤ë©° íšŒë³µí•©ë‹ˆë‹¤.",
                caution: "ë‚´ë¦¬ë§‰ì„ ë›°ì–´ ë‚´ë ¤ì˜¤ë©´ ë¬´ë¦ê³¼ ì•„í‚¬ë ˆìŠ¤ê±´ì— ì²´ì¤‘ì˜ 3~5ë°° ì¶©ê²©ì´ ê°€í•´ì§‘ë‹ˆë‹¤. ì ˆëŒ€ ë›°ì§€ ë§ˆì„¸ìš”. ê±·ëŠ” ê²ƒì´ í›ˆë ¨ì…ë‹ˆë‹¤."
            },
            "íœ´ì‹": {
                why: "ì¼ìš”ì¼ ì¥ê±°ë¦¬ í›ˆë ¨(LSD)ì„ ìœ„í•´ ì—ë„ˆì§€ë¥¼ ë¹„ì¶•í•˜ëŠ” ë‚ ì…ë‹ˆë‹¤. 'ì¹´ë³´ ë¡œë”©'ì˜ ë¯¸ë‹ˆ ë²„ì „ìœ¼ë¡œ, íƒ„ìˆ˜í™”ë¬¼ì„ ì¶©ë¶„íˆ ì„­ì·¨í•´ ê¸€ë¦¬ì½”ê²ì„ ì±„ì›ë‹ˆë‹¤.",
                how: "ê°€ë²¼ìš´ ì‚°ì±… ì •ë„ë¡œ ëª¸ì„ í’€ê±°ë‚˜ ì™„ì „íˆ ì‰½ë‹ˆë‹¤. ìˆ˜ë©´ ì‹œê°„ì„ 1ì‹œê°„ ë” í™•ë³´í•˜ì„¸ìš”.",
                caution: "ìŒì£¼ëŠ” í”¼í•˜ì„¸ìš”. íƒˆìˆ˜ë¥¼ ìœ ë°œí•˜ì—¬ ë‹¤ìŒ ë‚  LSD ìˆ˜í–‰ ëŠ¥ë ¥ì„ ë–¨ì–´ëœ¨ë¦½ë‹ˆë‹¤."
            },
            "LSD": {
                why: "ì§€ë°©ì„ ì—ë„ˆì§€ì›ìœ¼ë¡œ ì“°ëŠ” ëŠ¥ë ¥ì„ í‚¤ìš°ê³ , ì¥ì‹œê°„ ë‹¬ë¦´ ìˆ˜ ìˆëŠ” 'ëŸ¬ë‹ ì´ì½”ë…¸ë¯¸(íš¨ìœ¨ì„±)'ë¥¼ ë§Œë“­ë‹ˆë‹¤. í•˜í”„ ë§ˆë¼í†¤ ì™„ì£¼ì˜ ê¸°ì´ˆ ì²´ë ¥ì…ë‹ˆë‹¤.",
                how: "ì˜† ì‚¬ëŒê³¼ ëŒ€í™”í•  ìˆ˜ ìˆëŠ” í¸ì•ˆí•œ í˜ì´ìŠ¤(6:30~)ë¥¼ ìœ ì§€í•©ë‹ˆë‹¤. ì†ë„ë³´ë‹¤ëŠ” 'ì‹œê°„ì„ ì±„ìš°ëŠ” ê²ƒ'ì— ì§‘ì¤‘í•˜ì„¸ìš”.",
                caution: "ì¤‘ê°„ì— ë©ˆì¶”ì§€ ì•Šê³  ì²œì²œíˆë¼ë„ ê³„ì† ë›°ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤. 10km ì´ìƒ ë›¸ ë•ŒëŠ” ë°˜ë“œì‹œ ë¬¼ì´ë‚˜ ì—ë„ˆì§€ì ¤ì„ ì±™ê¸°ì„¸ìš”."
            }
        };

        // --- DATA SOURCE (Extracted from Image) ---
        const trainingData = [
            { week: 1, date: "2025-11-17", phase: "ì ì‘ê¸° (Base)", note: "ê±°ë¦¬ ì ì‘ ì‹œì‘", 
              lsdDist: 14.00, lsdPace: "6:30", 
              tempoDist: 4.00, tempoPace: "5:30", 
              uphillSets: 8, uphillPace: "4:40" },
            
            { week: 2, date: "2025-11-24", phase: "ì ì‘ê¸° (Base)", note: "LSD ê±°ë¦¬ ì¦ê°€", 
              lsdDist: 15.40, lsdPace: "6:30", 
              tempoDist: 4.28, tempoPace: "5:25", 
              uphillSets: 9, uphillPace: "4:38" },
            
            { week: 3, date: "2025-12-01", phase: "ì ì‘ê¸° (Base)", note: "ê¸°ì´ˆ ì²´ë ¥ í™•ë³´", 
              lsdDist: 16.94, lsdPace: "6:30", 
              tempoDist: 4.58, tempoPace: "5:20", 
              uphillSets: 10, uphillPace: "4:36" },
            
            { week: 4, date: "2025-12-08", phase: "íšŒë³µì£¼ (Recovery)", note: "ê°•ë„ ì¡°ì ˆ", 
              lsdDist: 11.86, lsdPace: "6:30", 
              tempoDist: 3.21, tempoPace: "5:30", 
              uphillSets: 7, uphillPace: "4:34" },
            
            { week: 5, date: "2025-12-15", phase: "ê°•í™”ê¸° (Build)", note: "ë‹¤ì‹œ ê±°ë¦¬ ì¦ê°€", 
              lsdDist: 16.94, lsdPace: "6:30", 
              tempoDist: 4.58, tempoPace: "5:20", 
              uphillSets: 10, uphillPace: "4:36" },
            
            { week: 6, date: "2025-12-22", phase: "ê°•í™”ê¸° (Build)", note: "ì—…í ì„¸íŠ¸ ì¦ê°€", 
              lsdDist: 18.63, lsdPace: "6:30", 
              tempoDist: 4.90, tempoPace: "5:15", 
              uphillSets: 11, uphillPace: "4:34" },
            
            { week: 7, date: "2025-12-29", phase: "ê°•í™”ê¸° (Build)", note: "20k ëŒíŒŒ", 
              lsdDist: 20.50, lsdPace: "6:30", 
              tempoDist: 5.24, tempoPace: "5:10", 
              uphillSets: 12, uphillPace: "4:32" },
            
            { week: 8, date: "2026-01-05", phase: "íšŒë³µì£¼ (Recovery)", note: "ì¤‘ê°„ íœ´ì‹", 
              lsdDist: 14.35, lsdPace: "6:30", 
              tempoDist: 4.19, tempoPace: "5:20", 
              uphillSets: 7, uphillPace: "4:30" },
            
            { week: 9, date: "2026-01-12", phase: "ê°•í™”ê¸° (Peak Prep)", note: "ê³ ê°•ë„ ì§€ì†", 
              lsdDist: 20.50, lsdPace: "6:30", 
              tempoDist: 5.24, tempoPace: "5:10", 
              uphillSets: 12, uphillPace: "4:32" },
            
            { week: 10, date: "2026-01-19", phase: "ê°•í™”ê¸° (Peak)", note: "ìµœëŒ€ ë¶€í•˜ ì§„ì…", 
              lsdDist: 22.55, lsdPace: "6:30", 
              tempoDist: 5.61, tempoPace: "5:05", 
              uphillSets: 13, uphillPace: "4:30" },
            
            { week: 11, date: "2026-01-26", phase: "ê°•í™”ê¸° (Max Peak)", note: "ìµœì¥ ê±°ë¦¬ LSD", 
              lsdDist: 24.80, lsdPace: "6:30", 
              tempoDist: 6.00, tempoPace: "5:00", 
              uphillSets: 14, uphillPace: "4:28" },
            
            { week: 12, date: "2026-02-02", phase: "ì¡°ì ˆê¸° (Taper)", note: "í›ˆë ¨ëŸ‰ ê°ì†Œ ì‹œì‘", 
              lsdDist: 17.36, lsdPace: "6:30", 
              tempoDist: 4.80, tempoPace: "5:10", 
              uphillSets: 9, uphillPace: "4:26" },

            { week: 13, date: "2026-02-09", phase: "ì‹¤ì „ê¸° (Race Prep)", note: "í˜ì´ìŠ¤ ê°ê° ìœ ì§€", 
              lsdDist: 19.84, lsdPace: "6:30", 
              tempoDist: 4.80, tempoPace: "5:00", 
              uphillSets: 11, uphillPace: "4:28" },

            { week: 14, date: "2026-02-16", phase: "ì¡°ì ˆê¸° (Taper)", note: "ê¸‰ê²©í•œ ì–‘ ê°ì†Œ", 
              lsdDist: 14.88, lsdPace: "6:30", 
              tempoDist: 3.60, tempoPace: "5:10", 
              uphillSets: 9, uphillPace: "4:26" },

            { week: 15, date: "2026-02-23", phase: "ëŒ€íšŒì£¼ (Race Week)", note: "ì»¨ë””ì…˜ ìµœì í™”", 
              lsdDist: 7.44, lsdPace: "6:30", 
              tempoDist: 1.80, tempoPace: "5:00", 
              uphillSets: 4, uphillPace: "4:28" }
        ];

        // --- WEEKLY SCHEDULE LOGIC ---
        const weekSelector = document.getElementById('weekSelector');
        const phaseBanner = document.getElementById('phaseBanner');
        const dailyGrid = document.getElementById('dailyGrid');
        const detailPanel = document.getElementById('workoutDetailPanel');

        // Populate Dropdown
        trainingData.forEach(d => {
            const opt = document.createElement('option');
            opt.value = d.week;
            opt.text = `Week ${d.week} (${d.date}): ${d.phase}`;
            weekSelector.appendChild(opt);
        });

        // Helper to get dates for Mon-Sun based on Week Start Date
        function getWeekDates(startDateStr) {
            const startDate = new Date(startDateStr);
            const dates = [];
            for (let i = 0; i < 7; i++) {
                const d = new Date(startDate);
                d.setDate(startDate.getDate() + i);
                const month = d.getMonth() + 1;
                const day = d.getDate();
                dates.push(`${month}.${day}`);
            }
            return dates;
        }

        // --- INTERACTION LOGIC (Show Detail) ---
        function showDetail(cardEl, title, work, spec, typeKey) {
            // 1. Remove highlight from all cards
            document.querySelectorAll('#dailyGrid > div').forEach(el => {
                el.classList.remove('selected-card', 'ring-4', 'ring-indigo-500');
                // Reset dimmed state if it was dimmed
                el.classList.remove('opacity-40', 'grayscale-[0.8]'); 
                el.classList.add('opacity-100', 'grayscale-0');
            });

            // 2. Highlight clicked card
            // If cardEl is provided (not null/undefined), highlight it
            if (cardEl) {
                cardEl.classList.remove('opacity-40', 'grayscale-[0.8]');
                cardEl.classList.add('selected-card');
            }

            // 3. Get Detail Data
            // Use the base type name to look up the library (e.g. "ì—…í ì¸í„°ë²Œ" -> "ì—…í" key)
            let key = typeKey;
            if (typeKey.includes('ë¦¬ì»¤ë²„ë¦¬')) key = 'ë¦¬ì»¤ë²„ë¦¬';
            if (typeKey.includes('íœ´ì‹') || typeKey.includes('ë³´ê°•')) key = 'íœ´ì‹/ë³´ê°•';
            if (typeKey.includes('í¬ë£¨ëŸ°')) key = 'í¬ë£¨ëŸ°';
            if (typeKey.includes('í…œí¬')) key = 'í…œí¬ëŸ°';
            if (typeKey.includes('ì—…í')) key = 'ì—…í';
            if (typeKey.includes('LSD')) key = 'LSD';
            // Saturday rest check
            if (typeKey === 'íœ´ì‹' && title.includes('í† ')) key = 'íœ´ì‹';

            const info = workoutLibrary[key] || { why: "ì„¸ë¶€ ì •ë³´ ì—†ìŒ", how: "-", caution: "-" };

            // 4. Update Panel UI
            document.getElementById('detailTitle').textContent = work;
            // Handle icon logic carefully
            const iconEl = cardEl ? cardEl.querySelector('.text-xs') : null;
            const iconText = iconEl ? iconEl.textContent.split(' ')[0] : "ğŸƒ";
            document.getElementById('detailIcon').textContent = iconText;
            document.getElementById('detailSpecs').textContent = spec;
            
            document.getElementById('detailWhy').textContent = info.why;
            document.getElementById('detailHow').textContent = info.how;
            document.getElementById('detailCaution').textContent = info.caution;

            // Update Accent Color based on type
            const accentDiv = document.getElementById('detailAccent');
            if(key === 'LSD') accentDiv.className = "absolute top-0 left-0 w-2 h-full bg-rose-500";
            else if(key === 'í…œí¬ëŸ°') accentDiv.className = "absolute top-0 left-0 w-2 h-full bg-cyan-500";
            else if(key === 'ì—…í') accentDiv.className = "absolute top-0 left-0 w-2 h-full bg-indigo-500";
            else accentDiv.className = "absolute top-0 left-0 w-2 h-full bg-slate-400";

            // 5. Panel is always visible now, no need to toggle hidden class
        }


        // Render Function
        function renderWeek(weekNum) {
            const data = trainingData.find(d => d.week == weekNum);
            const dates = getWeekDates(data.date);
            
            // Determine Today
            const todayObj = new Date();
            const todayStr = `${todayObj.getMonth() + 1}.${todayObj.getDate()}`;
            const isTodayInThisWeek = dates.includes(todayStr);

            // Update Banner
            phaseBanner.textContent = `Week ${data.week} [${data.phase}] - ${data.note}`;
            if (data.phase.includes('íšŒë³µ') || data.phase.includes('ì¡°ì ˆ')) {
                phaseBanner.className = "bg-slate-100 text-slate-800 px-4 py-3 rounded-lg mb-6 font-bold text-center border border-slate-200 shadow-sm";
            } else if (data.week === 15) {
                phaseBanner.className = "bg-rose-100 text-rose-800 px-4 py-3 rounded-lg mb-6 font-bold text-center border border-rose-200 shadow-sm";
            } else {
                phaseBanner.className = "bg-indigo-100 text-indigo-800 px-4 py-3 rounded-lg mb-6 font-bold text-center border border-indigo-200 shadow-sm";
            }

            // Clear Grid & Hide Panel
            dailyGrid.innerHTML = '';
            // Detail panel is always visible, so don't hide it

            const schedule = [
                { day: `ì›” (${dates[0]})`, type: "ë¦¬ì»¤ë²„ë¦¬", icon: "ğŸ›Œ", 
                  work: `íšŒë³µ ì¡°ê¹… 5km`, detail: `Pace: 7:00`, safety: "ì¼ìš”ì¼ LSD í”¼ë¡œ íšŒë³µ" },
                { day: `í™” (${dates[1]})`, type: "íœ´ì‹/ë³´ê°•", icon: "ğŸ§˜", 
                  work: "ì™„ì „ íœ´ì‹", detail: "ìŠ¤íŠ¸ë ˆì¹­ 20ë¶„", safety: "ìˆ˜ìš”ì¼ í¬ë£¨ëŸ° ëŒ€ë¹„" },
                { day: `ìˆ˜ (${dates[2]})`, type: "í¬ë£¨ëŸ°", icon: "ğŸƒâ€â™‚ï¸", 
                  work: "í¬ë£¨ ëŸ¬ë‹", detail: "ì¦ê±°ìš´ í˜ì´ìŠ¤", safety: "ì˜¤ë²„í˜ì´ìŠ¤ ì£¼ì˜" },
                { day: `ëª© (${dates[3]})`, type: "í…œí¬ëŸ°", icon: "âš¡", 
                  work: `ì§€ì†ì£¼ ${data.tempoDist}km`, detail: `Pace: ${data.tempoPace}`, safety: "ì¼ì •í•œ ë¦¬ë“¬ê° ìœ ì§€" },
                { day: `ê¸ˆ (${dates[4]})`, type: "ì—…í", icon: "â›°ï¸", 
                  work: `ì—…í ${data.uphillSets}ì„¸íŠ¸`, detail: `Pace: ${data.uphillPace}`, safety: "ë‚´ë¦¬ë§‰ ì ˆëŒ€ ê±·ê¸°" },
                { day: `í†  (${dates[5]})`, type: "íœ´ì‹", icon: "ğŸ’¤", 
                  work: "íœ´ì‹", detail: "ì»¨ë””ì…˜ ì¡°ì ˆ", safety: "íƒ„ìˆ˜í™”ë¬¼ ì„­ì·¨" },
                { day: `ì¼ (${dates[6]})`, type: "LSD", icon: "ğŸ›£ï¸", 
                  work: `ì¥ê±°ë¦¬ì£¼ ${data.lsdDist}km`, detail: `Pace: ${data.lsdPace}`, safety: "ì¤‘ê°„ ê¸‰ìˆ˜ í•„ìˆ˜" }
            ];

            let defaultCardToClick = null;

            // Generate Cards
            schedule.forEach((item, index) => {
                let cardClass = "bg-white border-slate-200 rounded-xl p-4 shadow-sm flex flex-col h-full transition-all duration-200 border relative cursor-pointer active:scale-95";
                const isToday = (dates[index] === todayStr);

                // Highlight / Dim Logic
                if (isTodayInThisWeek) {
                    if (isToday) {
                        cardClass += " ring-4 ring-indigo-500 ring-offset-2 scale-[1.02] shadow-xl z-10 bg-white opacity-100";
                        item.typeTag = "TODAY ğŸ”¥";
                    } else {
                        cardClass += " opacity-60 grayscale-[0.5] hover:opacity-100 hover:grayscale-0 hover:scale-100";
                        item.typeTag = item.type;
                    }
                } else {
                    cardClass += " hover:shadow-md hover:-translate-y-1";
                    item.typeTag = item.type;
                }

                // Create Element
                const cardDiv = document.createElement('div');
                cardDiv.className = cardClass;
                cardDiv.innerHTML = `
                    ${isToday ? '<div class="absolute -top-3 -right-3 bg-indigo-600 text-white text-xs font-bold px-3 py-1 rounded-full animate-bounce shadow-lg">TODAY</div>' : ''}
                    <div class="flex justify-between items-start mb-2 pointer-events-none">
                        <span class="font-bold text-slate-900">${item.day}</span>
                        <span class="text-xs font-bold px-2 py-1 rounded bg-slate-50 border border-slate-200 whitespace-nowrap">${item.icon} ${item.typeTag}</span>
                    </div>
                    <h4 class="font-bold text-slate-800 text-sm mb-1 pointer-events-none">${item.work}</h4>
                    <div class="text-xs text-slate-500 mb-3 pointer-events-none">
                        <span class="font-mono bg-slate-50 px-1 rounded inline-block">${item.detail}</span>
                    </div>
                    <div class="mt-auto pt-3 border-t border-dashed border-slate-200 pointer-events-none">
                        <p class="text-xs font-bold text-emerald-600 flex items-start">
                            <span class="mr-1">ğŸ›¡ï¸</span> 
                            <span>${item.safety}</span>
                        </p>
                    </div>
                `;

                // Add Click Event
                cardDiv.onclick = function() {
                    showDetail(this, item.day, item.work, item.detail, item.type);
                };

                dailyGrid.appendChild(cardDiv);

                // Determine which card to select by default
                if (isTodayInThisWeek) {
                    if (isToday) defaultCardToClick = cardDiv;
                } else {
                    // Default to Monday if today is not in this week
                    if (index === 0) defaultCardToClick = cardDiv;
                }
            });
            
            // Trigger default selection after cards are rendered
            if (defaultCardToClick) {
                 defaultCardToClick.click();
            }
        }

        // Auto-Select Current Week Logic
        function initAutoSelect() {
            const today = new Date();
            const startDate = new Date("2025-11-17");
            const diffTime = today - startDate;
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24)); 
            let currentWeek = 1;
            if (diffDays >= 0) currentWeek = Math.floor(diffDays / 7) + 1;
            else currentWeek = 1; 
            if (currentWeek > 15) currentWeek = 15;
            
            weekSelector.value = currentWeek;
            renderWeek(currentWeek);
        }

        weekSelector.addEventListener('change', (e) => renderWeek(e.target.value));
        initAutoSelect();

        // --- CHART: COMBO ---
        try {
            const weekLabels = trainingData.map(d => `W${d.week}`);
            const ctxCombo = document.getElementById('comboChart').getContext('2d');
            new Chart(ctxCombo, {
                type: 'bar',
                data: {
                    labels: weekLabels,
                    datasets: [
                        {
                            type: 'line',
                            label: 'ì—…í ì„¸íŠ¸ ìˆ˜ (Sets)',
                            data: trainingData.map(d => d.uphillSets),
                            borderColor: '#06b6d4',
                            backgroundColor: '#06b6d4',
                            borderWidth: 3,
                            tension: 0.3,
                            yAxisID: 'y1'
                        },
                        {
                            type: 'bar',
                            label: 'LSD ê±°ë¦¬ (km)',
                            data: trainingData.map(d => d.lsdDist),
                            backgroundColor: trainingData.map(d => {
                                if (d.week === 15) return '#f43f5e';
                                if (d.phase.includes('íšŒë³µ') || d.phase.includes('ì¡°ì ˆ')) return '#94a3b8';
                                return '#4f46e5';
                            }),
                            yAxisID: 'y'
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    interaction: { mode: 'index', intersect: false },
                    scales: {
                        y: { beginAtZero: true, title: { display: true, text: 'Distance (km)' }, grid: { display: false } },
                        y1: { beginAtZero: true, position: 'right', title: { display: true, text: 'Sets' }, grid: { color: '#f1f5f9' } }
                    }
                }
            });
        } catch (e) { console.error("Chart loading failed", e); }
    </script>
</body>
</html>
